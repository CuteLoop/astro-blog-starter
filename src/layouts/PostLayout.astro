---
import BaseLayout from "./BaseLayout.astro";
import { slugifyTag } from "../utils/slugifyTag";

const { entry } = Astro.props;
const { title, pubDate, description, author, image, tags, theme } = entry.data;

const dateString = pubDate.toISOString().slice(0, 10);
const pageTheme = theme ?? "starry-night";
---

<BaseLayout pageTitle={title} description={description} theme={pageTheme}>
  <header class="post-header">
    <p class="meta">{dateString}{author ? ` â€¢ ${author}` : ""}</p>

    {/* If you prefer *only one* H1 per page, switch this to <h2> */}
    {/* <h2 class="post-title">{title}</h2> */}

    {description && <p class="meta"><em>{description}</em></p>}

    {(tags?.length ?? 0) > 0 && (
      <ul class="tag-list" aria-label="Tags">
        {tags.map((t) => (
          <li class="tag">
            <a href={`/tags/${slugifyTag(t)}/`}>{t}</a>
          </li>
        ))}
      </ul>
    )}

    {image?.url && (
      <img
        class="post-hero"
        src={image.url}
        alt={image.alt}
        width="1200"
        height="630"
        loading="lazy"
      />
    )}
  </header>

  <article class="prose">
    <slot />
  </article>

  <style>
    .post-header {
      margin-bottom: 1.25rem;
    }
    .post-title {
      margin: 0.25rem 0 0.5rem;
    }
  </style>
</BaseLayout>
