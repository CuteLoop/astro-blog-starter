---
import "../styles/global.css";
import { slugifyTag } from "../utils/slugifyTag";

const { entry } = Astro.props;
const { title, pubDate, description, author, image, tags } = entry.data;

const dateString = pubDate.toISOString().slice(0, 10);
---

<main class="container paper">
  <header class="post-header">
    <p class="meta">{dateString}{author ? ` â€¢ ${author}` : ""}</p>
    <h1>{title}</h1>

    {description && <p class="meta"><em>{description}</em></p>}

    {(tags?.length ?? 0) > 0 && (
      <ul class="tag-list" aria-label="Tags">
        {tags.map((t) => (
          <li class="tag">
            <a href={`/tags/${slugifyTag(t)}/`}>{t}</a>
          </li>
        ))}
      </ul>
    )}

    {image?.url && (
      <img
        class="post-hero"
        src={image.url}
        alt={image.alt}
        width="1200"
        height="630"
        loading="lazy"
      />
    )}
  </header>

  <article class="prose">
    <slot />
  </article>
</main>
